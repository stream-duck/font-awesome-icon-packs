name: Release All Icon Packs

on:
  push:
    tags:
      - 'v*'

permissions:
  contents: write
  actions: read
  id-token: write

jobs:
  release-brands:
    uses: ./.github/workflows/render-icon-pack.yml
    with:
      base_tag: ${{ github.ref_name }}
      icon_pack_id: brands

  release-chisel-regular:
    uses: ./.github/workflows/render-icon-pack.yml
    with:
      base_tag: ${{ github.ref_name }}
      icon_pack_id: chisel-regular

  release-classic-group:
    strategy:
      matrix:
        icon_pack_id: [ classic-solid, classic-regular, classic-light, classic-thin ]
    uses: ./.github/workflows/render-icon-pack.yml
    with:
      base_tag: ${{ github.ref_name }}
      icon_pack_id: ${{ matrix.icon_pack_id }}

  release-duotone-group:
    strategy:
      matrix:
        icon_pack_id: [ duotone-solid, duotone-regular, duotone-light, duotone-thin ]
    uses: ./.github/workflows/render-icon-pack.yml
    with:
      base_tag: ${{ github.ref_name }}
      icon_pack_id: ${{ matrix.icon_pack_id }}

  release-etch-solid:
    uses: ./.github/workflows/render-icon-pack.yml
    with:
      base_tag: ${{ github.ref_name }}
      icon_pack_id: etch-solid

  release-jelly-group:
    strategy:
      matrix:
        icon_pack_id: [ jelly-regular, jelly-duo-regular, jelly-fill-regular ]
    uses: ./.github/workflows/render-icon-pack.yml
    with:
      base_tag: ${{ github.ref_name }}
      icon_pack_id: ${{ matrix.icon_pack_id }}

  release-notdog-group:
    strategy:
      matrix:
        icon_pack_id: [ notdog-solid, notdog-duo-solid ]
    uses: ./.github/workflows/render-icon-pack.yml
    with:
      base_tag: ${{ github.ref_name }}
      icon_pack_id: ${{ matrix.icon_pack_id }}

  release-sharp-group:
    strategy:
      matrix:
        icon_pack_id: [ sharp-solid, sharp-regular, sharp-light, sharp-thin ]
    uses: ./.github/workflows/render-icon-pack.yml
    with:
      base_tag: ${{ github.ref_name }}
      icon_pack_id: ${{ matrix.icon_pack_id }}

  release-sharp-duotone-group:
    strategy:
      matrix:
        icon_pack_id: [ sharp-duotone-solid, sharp-duotone-regular, sharp-duotone-light, sharp-duotone-thin ]
    uses: ./.github/workflows/render-icon-pack.yml
    with:
      base_tag: ${{ github.ref_name }}
      icon_pack_id: ${{ matrix.icon_pack_id }}

  release-slab-group:
    strategy:
      matrix:
        icon_pack_id: [ slab-regular, slab-press-regular ]
    uses: ./.github/workflows/render-icon-pack.yml
    with:
      base_tag: ${{ github.ref_name }}
      icon_pack_id: ${{ matrix.icon_pack_id }}

  release-thumbprint-light:
    uses: ./.github/workflows/render-icon-pack.yml
    with:
      base_tag: ${{ github.ref_name }}
      icon_pack_id: thumbprint-light

  release-utility-group:
    strategy:
      matrix:
        icon_pack_id: [ utility-semibold, utility-duo-semibold, utility-fill-semibold ]
    uses: ./.github/workflows/render-icon-pack.yml
    with:
      base_tag: ${{ github.ref_name }}
      icon_pack_id: ${{ matrix.icon_pack_id }}

  release-whiteboard-semibold:
    uses: ./.github/workflows/render-icon-pack.yml
    with:
      base_tag: ${{ github.ref_name }}
      icon_pack_id: whiteboard-semibold

  release-all:
    runs-on: self-hosted
    needs:
      - release-brands
      - release-chisel-regular
      - release-classic-group
      - release-duotone-group
      - release-etch-solid
      - release-jelly-group
      - release-notdog-group
      - release-sharp-group
      - release-sharp-duotone-group
      - release-slab-group
      - release-thumbprint-light
      - release-utility-group
      - release-whiteboard-semibold
    steps:
      - uses: softprops/action-gh-release@v2
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
          RELEASE_URL: https://github.com/${{ github.repository }}/releases/tag/${{ github.ref_name }}
        with:
          name: "Icon Packs ${{ github.ref_name }}"
          body: |
            ### ðŸŽ¨ Icon Packs

            <ul>
              <li><a href="${{ RELEASE_URL }}-brands">Brands ${{ github.ref_name }}</a></li>
              <li><a href="${{ RELEASE_URL }}-chisel-regular">Chisel Regular ${{ github.ref_name }}</a></li>
              <li><a href="${{ RELEASE_URL }}-classic-solid">Classic Solid ${{ github.ref_name }}</a></li>
              <li><a href="${{ RELEASE_URL }}-classic-regular">Classic Regular ${{ github.ref_name }}</a></li>
              <li><a href="${{ RELEASE_URL }}-classic-light">Classic Light ${{ github.ref_name }}</a></li>
              <li><a href="${{ RELEASE_URL }}-classic-thin">Classic Thin ${{ github.ref_name }}</a></li>
              <li><a href="${{ RELEASE_URL }}-duotone-solid">Duotone Solid ${{ github.ref_name }}</a></li>
              <li><a href="${{ RELEASE_URL }}-duotone-regular">Duotone Regular ${{ github.ref_name }}</a></li>
              <li><a href="${{ RELEASE_URL }}-duotone-light">Duotone Light ${{ github.ref_name }}</a></li>
              <li><a href="${{ RELEASE_URL }}-duotone-thin">Duotone Thin ${{ github.ref_name }}</a></li>
              <li><a href="${{ RELEASE_URL }}-etch-solid">Etch Solid ${{ github.ref_name }}</a></li>
              <li><a href="${{ RELEASE_URL }}-jelly-regular">Jelly Regular ${{ github.ref_name }}</a></li>
              <li><a href="${{ RELEASE_URL }}-jelly-duo-regular">Jelly Duo Regular ${{ github.ref_name }}</a></li>
              <li><a href="${{ RELEASE_URL }}-jelly-fill-regular">Jelly Fill Regular ${{ github.ref_name }}</a></li>
              <li><a href="${{ RELEASE_URL }}-notdog-solid">Notdog Solid ${{ github.ref_name }}</a></li>
              <li><a href="${{ RELEASE_URL }}-notdog-duo-solid">Notdog Duo Solid ${{ github.ref_name }}</a></li>
              <li><a href="${{ RELEASE_URL }}-sharp-solid">Sharp Solid ${{ github.ref_name }}</a></li>
              <li><a href="${{ RELEASE_URL }}-sharp-regular">Sharp Regular ${{ github.ref_name }}</a></li>
              <li><a href="${{ RELEASE_URL }}-sharp-light">Sharp Light ${{ github.ref_name }}</a></li>
              <li><a href="${{ RELEASE_URL }}-sharp-thin">Sharp Thin ${{ github.ref_name }}</a></li>
              <li><a href="${{ RELEASE_URL }}-sharp-duotone-solid">Sharp Duotone Solid ${{ github.ref_name }}</a></li>
              <li><a href="${{ RELEASE_URL }}-sharp-duotone-regular">Sharp Duotone Regular ${{ github.ref_name }}</a></li>
              <li><a href="${{ RELEASE_URL }}-sharp-duotone-light">Sharp Duotone Light ${{ github.ref_name }}</a></li>
              <li><a href="${{ RELEASE_URL }}-sharp-duotone-thin">Sharp Duotone Thin ${{ github.ref_name }}</a></li>
              <li><a href="${{ RELEASE_URL }}-slab-regular">Slab Regular ${{ github.ref_name }}</a></li>
              <li><a href="${{ RELEASE_URL }}-slab-press-regular">Slab Press Regular ${{ github.ref_name }}</a></li>
              <li><a href="${{ RELEASE_URL }}-thumbprint-light">Thumbprint Light ${{ github.ref_name }}</a></li>
              <li><a href="${{ RELEASE_URL }}-utility-semibold">Utility Semibold ${{ github.ref_name }}</a></li>
              <li><a href="${{ RELEASE_URL }}-utility-duo-semibold">Utility Duo Semibold ${{ github.ref_name }}</a></li>
              <li><a href="${{ RELEASE_URL }}-utility-fill-semibold">Utility Fill Semibold ${{ github.ref_name }}</a></li>
              <li><a href="${{ RELEASE_URL }}-whiteboard-semibold">Whiteboard Semibold ${{ github.ref_name }}</a></li>
            </ul>
          make_latest: true
